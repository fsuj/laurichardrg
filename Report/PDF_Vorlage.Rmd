---
title: Comparison of image matching algorithms for rock glacier displacement mapping. A case study for the Laurichard rock glacier, French alps. 
author: 
- Florian Strohmaier, Stefan Werner
- Dozentin Prof. Schmullius, Dr. Biskop
#date: "`r format(Sys.time(), '%d %B %Y')`"
date: "July 11 2018"
#header-includes:
#  - \usepackage[ngerman]{babel}
output:
  pdf_document: 
    #toc: TRUE
    number_sections: yes
    #     pandoc_args: [
    #   "-V", "classoption=twocolumn"
    # ]
  html_document: default
link-citations: yes
bibliography: [bib20180620.bib,Rpackages.bib]
subtitle: Geo 411 - Landschaftsmanagement und Fernerkundung
#biblio-style: apalike
fontsize: 11pt
geometry: margin = 1.2in
linestretch:  1.5



# abstract: "Dieser Handzettel soll einen Überblick Über die R Pakete **raster** (@R-raster) und **stars** (@R-stars) geben sowie die aktuellen Entwicklungen zur Rasterprozessierung in R aufzeigen."

# <br /> 
# @Hijmans.2017d
# \newpage
# \newline
# ** FETT**
# * kursiv *
# * Aufzählung
# * Aufzählung
#   + Unterpunkt
# @Holzworth.2018b
#
#
# ```{r echo=FALSE, fig.pos="h",fig.align="center", out.width = "150px", fig.cap= "NetCDF- Datenstruktur Davis(2014)"}
# knitr::include_graphics("netcdf-file-structure.png")
# ```
# 
#```{r packages-tab2,echo=FALSE, warning=FALSE, message=FALSE}
#library(dplyr)
#library(knitr)
#library(kableExtra)
#text_tbl = read.csv(file = "tables/SDG_Goals_final.csv",header = T,sep = ";")
# knitr::kable(text_tbl, format = "latex", booktabs = TRUE, caption = "17 SDG's (UN.2015b)") %>% 
#    kableExtra::kable_styling(full_width = F, font_size = 11 , latex_options = c("striped","hold_position","scale_down"))%>%
#   column_spec(1, bold = TRUE) %>%  #color = "blue"
#   column_spec(2, width = "14.5cm") %>%
#   row_spec(0, bold = TRUE)
#```
#
# $$\phi$$ Formel
# $\phi$ inline Formel


---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

\centering
\raggedright
\newpage
\tableofcontents
\newpage


# Introduction

Rock glaciers are distinctive morphological features of high mountain periglacial environments. Their deformation processes are strongly linked to permafrost degradation [@haeberli_mountain_2010]. Thus, research of deformation velocities of rock glaciers does not only provide insights into periglacial morphology but also in time evolution of permafrost. Several authors have used rock glaciers as proxies for permafrost presence/absence in permafrost distribution models [@boeckli_statistical_2012,@marcer_permafrost_2017].

In recent years, multi-method approaches have been used in this field of research; @buchli_kinematic_2018 combine laser scanning, terrestrial radar and in-situ measurements at the Furggwanghorn rock glacier in Switzerland. Remote sensing data, especially radar interferometry (InSAR) [@barboux_mapping_2015], optical imagery and laser scanning [@arenson_detection_2016] have become more and more common for rock glacier deformation analysis. With unmanned aerial vehicles (UAVs), high-resolution consumer grade digital cameras and smartphones being more and more widespread, surveys with high to very high resolution in time and space dimensions [@dallasta_unmanned_2017] become affordable in research and natural hazard mitigation contexts. Structure-from-motion (SfM) [@smith_structure_2016] and other established photogrammetric techniques allow for the generation of genuine 3D point clouds as well as 2.5D digital surface models (DSMs) and derivates, acquired by abovementioned techniques [@eltner_imagebased_2016].

From a series of those surface models at different points in time, displacement velocities of mass movement processes as well as surface changes resulting from erosion and denudation can be quantified. Techniques range from simple DEM differencing to 3-dimensional point-cloud comparison [@james_3d_2017].

Image matching techniques are well established methods for the quantification of surface changes in geomorphology and glaciology [@paul_glaciers_2015]. They have already been developed for glacier velocity analyses in the mid-1980s [@scambos_application_1992] and have been developed further since then. They do not necessarily depend on elevation models, except for the quantification of 3-dimensional (i.e. elevation) differences. All image matching algorithms are based on the comparison of either local image patterns or structures/features, on global image characteristics or a combination thereof. They can be applied to panchromatic or colour images as well as to DEMs and their derivates and image transformations (most commonly used: Fourier transformations, filters and principal component analyses) [@heid_evaluation_2012,@dallasta_unmanned_2017]. Besides scope and input data, image matching algorithms can be structured by their similarity measure: The calculation of a normalized cross-correlation coefficient (NCC) on two image parts is the most widespread mesaure [@scambos_application_1992]. More recently, NCC-based similarity measures have been developed further, being based on image derivatives [@heid_evaluation_2012] or on global energy functions [@argandacarreras_consistent_2006].

Image matching techniques have been applied to rock glacier deformation detection and the calculation of velocity fields. @bodin_multi-annual_2018 present one of the most recent examples for the Laurichard rock glacier in the French Alps. Based on their work, we compared the performance of two image matching algorithms for surface displacement detection between 2012 and 2017: 
1. The well-established IMCORR algorithm [@nsidc_imcorr_2018], based on @scambos_application_1992; and 
2. bUnwarpJ, a semi-global algorithm originally developed for image registration in health studies [@argandacarreras_consistent_2006].
For both algorithms we calculated an annual displacement rate of the Laurichard rock glacier, based on high-resolution DEMs from an aerial laser scanning campaign in 2012 and from a UAV campaign in 2017. We optimized parameter settings of both approaches and estimated the accuracy of the resulting deformation fields with GPS displacement data from @bodin_multi-annual_2018 and manually mapped surface displacements.

TODO: Structure of the paper? 

# Study Area

The Laurichard rock glacier is situated in the French Alps, with an approximately 800m long and 100-200m wide tounge flowing from south to north-east. Due to its morphological features it can be considered an active rock glacier [@bodin_multi-annual_2018]. Especially, hillshades generated from available digital elevation models (DEMs) exhibit scarps, oriented perpendicular to the flow direction as well as a steep rising frontal lobe.

Since the beginning of the 1980s, the Laurichard rock glacier has been subject to in-situ and remote sensing photogrammetry research. Refer to @bodin_multi-annual_2018 for the most current research work as well as for an overview over the history of site studies.

# Data and Methods

## Study Site

Insert Map Study Site, different Validation Points and Landmarks, Hillshade, background map

## Used Data


Jason Goetz (personal communication). [!]

## IMCORR

## ImageJ BUnwrapJ

## Test Setup

* Decision to to test with ImageJ (time)
* Test setup
  + Test I: Testing the differce of Landmarks (60/61), landmark on falling rock (yes/no), see map for study site, decision which Landmarks we gonna use
  + Test II: Testing Different Input Data (DEM,HILL,ASPECT,SLOPE;PCA1) for Transformation BunwrappJ, all applied to DEM, decision which input data  we gonna use for Transformation
  + Test III: Testing different Setting, Name LMW/IMW (Landmarkweight/imageweight), link to formula BunwrappJ, decision final processing settings
  + Test IV: three different Settings for IMCORR, to much time, future research sample TestSetup like bunwrappJ (with out Landmarks)

# Results

## Test I

Testing the influnce of extreme Values (falling Rocks) towards the image machings technics

```{r packages-tab2,echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(knitr)
library(kableExtra)
text_tbl = read.csv(file = "tables/T1_DEM_60_61_xyz_Bodin_manuell.csv",header = T,sep = ";")
 knitr::kable(text_tbl, format = "latex", booktabs = TRUE, caption = "Resulting Statistics Test I") %>% 
    kableExtra::kable_styling(full_width = F, font_size = 10 , latex_options = c("striped","hold_position","scale_down"))%>%
   column_spec(1, bold = TRUE, width = "2cm") %>%  #color = "blue"
   column_spec(2, width = "2.5cm") %>%
   column_spec(3:6, width = "3cm") %>%
   row_spec(0, bold = TRUE) %>%
   row_spec(1, bold = TRUE) %>%
   row_spec(12:13, bold = TRUE) %>%
   row_spec(16, bold = TRUE) %>%
   row_spec(27:28, bold = TRUE)
   
```

## Test II 

Testing different input Data for Transformation Creation


```{r packages-tab3,echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(knitr)
library(kableExtra)
text_tbl = read.csv(file = "tables/T2_diff_input_60_XYZ_bodin_manuell.csv",header = T,sep = ";")
 knitr::kable(text_tbl, format = "latex", booktabs = TRUE, caption = "Resulting Statistics Test II") %>% 
    kableExtra::kable_styling(full_width = F, font_size = 10 , latex_options = c("striped","hold_position","scale_down"))%>%
   column_spec(1, bold = TRUE, width = "2cm") %>%  #color = "blue"
   column_spec(2, width = "2.5cm") %>%
   column_spec(3:12, width = "3cm") %>%
   row_spec(0, bold = TRUE) %>%
   row_spec(1, bold = TRUE) %>%
   row_spec(12:13, bold = TRUE) %>%
   row_spec(16, bold = TRUE) %>%
   row_spec(27:28, bold = TRUE) %>%
   kableExtra::landscape()
   
```

## Test III

Testing different Settings of ImageJ


```{r packages-tab4,echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(knitr)
library(kableExtra)
text_tbl = read.csv(file = "tables/T3_Settings_XYZ_Bodin_manuell.csv",header = T,sep = ";")
 knitr::kable(text_tbl, format = "latex", booktabs = TRUE, caption = "Resulting Statistics Test III") %>% 
    kableExtra::kable_styling(full_width = F, font_size = 10 , latex_options = c("striped","hold_position","scale_down"))%>%
   column_spec(1, bold = TRUE, width = "2cm") %>%  #color = "blue"
   column_spec(2, width = "2.5cm") %>%
   column_spec(3:18, width = "3cm") %>%
   row_spec(0, bold = TRUE) %>%
   row_spec(1, bold = TRUE) %>%
   row_spec(12:13, bold = TRUE) %>%
   row_spec(16, bold = TRUE) %>%
   row_spec(27:28, bold = TRUE) %>%
   kableExtra::landscape()
   
```

## Test IV


```{r packages-tab5,echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(knitr)
library(kableExtra)
text_tbl = read.csv(file = "tables/XYZ_IMCORR_Bodin_manuell_stats.csv",header = T,sep = ";")
 knitr::kable(text_tbl, format = "latex", booktabs = TRUE, caption = "Resulting Statistics Test IV") %>% 
    kableExtra::kable_styling(full_width = F, font_size = 10 , latex_options = c("striped","hold_position","scale_down"))%>%
   column_spec(1, bold = TRUE, width = "2cm") %>%  #color = "blue"
   column_spec(2, width = "2.5cm") %>%
   column_spec(3:18, width = "3cm") %>%
   row_spec(0, bold = TRUE) %>%
   row_spec(1, bold = TRUE) %>%
   row_spec(12:13, bold = TRUE) %>%
   row_spec(16, bold = TRUE) %>%
   row_spec(27:28, bold = TRUE) %>%
   kableExtra::landscape()
   
```

## Final Results

* BunwrappJ: DEM_60_1_1
* IMCORR: DEM_256_64_01 (because differnece in expert the expert approach to 256_128_01 is maginal)
* MAP of IMCORR / BUNWRAPP
* Scatterplot
* Raster Stats ( maybe in appendix, and delate other table there)

# Discussion

* Convertion to 8 bit Bunwrapp input, loss of data (especially DEM)
* 


# Conclusion

# Outlook (or: Conclusion and Outlook?)

# Appendix


```{r packages-tab6,echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(knitr)
library(kableExtra)
text_tbl = read.csv(file = "tables/T1_DEM_60_61_xyz_Raster_Stats.csv",header = T,sep = ";")
 knitr::kable(text_tbl, format = "latex", booktabs = TRUE, caption = "Raster Statistics Test I") %>% 
    kableExtra::kable_styling(full_width = F, font_size = 10 , latex_options = c("striped","hold_position","scale_down")) %>%
   column_spec(1, bold = TRUE, width = "2cm") %>%  #color = "blue"
   row_spec(0, bold = TRUE) %>%
   # row_spec(1, bold = TRUE) %>%
   # row_spec(12:13, bold = TRUE) %>%
   # row_spec(16, bold = TRUE) %>%
   # row_spec(27:28, bold = TRUE) %>%
   kableExtra::landscape()
   
```


```{r packages-tab7,echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(knitr)
library(kableExtra)
text_tbl = read.csv(file = "tables/T2_diff_input_60_raster_stats.csv",header = T,sep = ";")
 knitr::kable(text_tbl, format = "latex", booktabs = TRUE, caption = "Raster Statistics Test I") %>% 
    kableExtra::kable_styling(full_width = F, font_size = 10 , latex_options = c("striped","hold_position","scale_down")) %>%
   column_spec(1, bold = TRUE, width = "2cm") %>%  #color = "blue"
   row_spec(0, bold = TRUE) %>%
   # row_spec(1, bold = TRUE) %>%
   # row_spec(12:13, bold = TRUE) %>%
   # row_spec(16, bold = TRUE) %>%
   # row_spec(27:28, bold = TRUE) %>%
   kableExtra::landscape()
   
```


```{r packages-tab8,echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(knitr)
library(kableExtra)
text_tbl = read.csv(file = "tables/T3_Settings_raster_stats.csv",header = T,sep = ";")
 knitr::kable(text_tbl, format = "latex", booktabs = TRUE, caption = "Raster Statistics Test II") %>% 
    kableExtra::kable_styling(full_width = F, font_size = 10 , latex_options = c("striped","hold_position","scale_down")) %>%
   column_spec(1, bold = TRUE, width = "2cm") %>%  #color = "blue"
   row_spec(0, bold = TRUE) %>%
   # row_spec(1, bold = TRUE) %>%
   # row_spec(12:13, bold = TRUE) %>%
   # row_spec(16, bold = TRUE) %>%
   # row_spec(27:28, bold = TRUE) %>%
   kableExtra::landscape()
   
```


```{r packages-tab9,echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(knitr)
library(kableExtra)
text_tbl = read.csv(file = "tables/T3_Settings_raster_stats.csv",header = T,sep = ";")
 knitr::kable(text_tbl, format = "latex", booktabs = TRUE, caption = "Raster Statistics Test III") %>% 
    kableExtra::kable_styling(full_width = F, font_size = 10 , latex_options = c("striped","hold_position","scale_down")) %>%
   column_spec(1, bold = TRUE, width = "2cm") %>%  #color = "blue"
   row_spec(0, bold = TRUE) %>%
   # row_spec(1, bold = TRUE) %>%
   # row_spec(12:13, bold = TRUE) %>%
   # row_spec(16, bold = TRUE) %>%
   # row_spec(27:28, bold = TRUE) %>%
   kableExtra::landscape()
   
```




```{r packages-tab10,echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(knitr)
library(kableExtra)
text_tbl = read.csv(file = "tables/XYZ_IMCORR_raster_stats.csv",header = T,sep = ";")
 knitr::kable(text_tbl, format = "latex", booktabs = TRUE, caption = "Raster Statistics Test IV") %>% 
    kableExtra::kable_styling(full_width = F, font_size = 10 , latex_options = c("striped","hold_position","scale_down")) %>%
   column_spec(1, bold = TRUE, width = "2cm") %>%  #color = "blue"
   row_spec(0, bold = TRUE) %>%
   # row_spec(1, bold = TRUE) %>%
   # row_spec(12:13, bold = TRUE) %>%
   # row_spec(16, bold = TRUE) %>%
   # row_spec(27:28, bold = TRUE) %>%
   kableExtra::landscape()
   
```


# References



